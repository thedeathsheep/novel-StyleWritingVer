---
description: StyleEvent 项目定位、产品约束与文档索引
alwaysApply: true
---

# StyleEvent（风格写作）项目规则

## 产品定位

- **产品名**：StyleEvent（风格写作）；曾用名 Echo / 回响。
- **核心**：灵感共鸣式写作助手 — **不代写、只检索**；从配置的知识库做语义检索，把带出处的片段在**灵感区**静默呈现，激发灵感。
- **界面**：极简暗色；**无侧栏**；灵感区在**中间偏上**，每条 = 纯文本 + 小字出处；背光 + 轻微浮动；下方主编辑区。

## 必达约束（实现时遵守）

- **出处 100%**：每条灵感必须来自真实入库片段，带可追溯来源（库名/书名）；禁止模型编造。
- **触发**：停顿 1.5s 或选中文本才触发检索；**同一时刻只保留最新一次请求**（取消未完成的上一请求）。
- **降级**：检索超时 2s 返回空，不阻塞编辑、不弹窗报错；空结果时灵感区显示「未找到相关片段」或保持上一状态。
- **延迟目标**：触发 → 灵感区首条可见 P95 &lt; 1.2s（MVP），后续 &lt; 800ms。

## 文档索引（优先参考）

- 产品需求与指标：`docs/产品需求与指标.md`
- 流程与触发：`docs/灵感瀑布流-流程原型.md`
- 界面与视觉：`docs/FIGMA-原型设计说明.md`
- **改造规划（如何从 Novel 改造成 StyleEvent）**：`docs/StyleEvent-基于Novel的改造规划.md`
- 技术评估：`docs/技术架构评估与改进建议.md`

## 仓库结构

- **应用**：`apps/web`（Next.js）；主写作页 `/`，可运行原型 `/prototype`。
- **编辑器包**：`packages/headless`（novel），导出 `EditorRoot`、`EditorContent`、`useEditor` 等；`useEditor()` 必须在 `EditorRoot` 子树内调用。
